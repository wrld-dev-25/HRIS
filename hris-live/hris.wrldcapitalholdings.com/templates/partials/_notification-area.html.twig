<div class="relative flex items-center dropdown h-header">
    <button type="button" class="inline-flex justify-center relative items-center p-0 text-topbar-item transition-all size-[37.5px] duration-200 ease-linear bg-topbar rounded-md dropdown-toggle btn hover:bg-topbar-item-bg-hover hover:text-topbar-item-hover group-data-[topbar=dark]:bg-topbar-dark group-data-[topbar=dark]:hover:bg-topbar-item-bg-hover-dark group-data-[topbar=dark]:hover:text-topbar-item-hover-dark group-data-[topbar=brand]:bg-topbar-brand group-data-[topbar=brand]:hover:bg-topbar-item-bg-hover-brand group-data-[topbar=brand]:hover:text-topbar-item-hover-brand group-data-[topbar=dark]:dark:bg-zink-700 group-data-[topbar=dark]:dark:hover:bg-zink-600 group-data-[topbar=brand]:text-topbar-item-brand group-data-[topbar=dark]:dark:hover:text-zink-50 group-data-[topbar=dark]:dark:text-zink-200 group-data-[topbar=dark]:text-topbar-item-dark" id="notificationDropdown" data-bs-toggle="dropdown">
        <i data-lucide="bell-ring" class="inline-block size-5 stroke-1 fill-slate-100 group-data-[topbar=dark]:fill-topbar-item-bg-hover-dark group-data-[topbar=brand]:fill-topbar-item-bg-hover-brand"></i>
        <span class="absolute top-0 right-0 flex size-1.5">
            <span class="absolute inline-flex w-full h-full rounded-full opacity-75 animate-ping bg-sky-400"></span>
            <span class="relative inline-flex size-1.5 rounded-full bg-sky-500"></span>
        </span>
    </button>
    <div class="absolute z-50 hidden ltr:text-left rtl:text-right bg-white rounded-md shadow-md !top-4 dropdown-menu min-w-[20rem] lg:min-w-[26rem] dark:bg-zink-600" aria-labelledby="notificationDropdown">
        {# <div id="_notification-area">
            {{ dump(app.session.get('notification_message')) }}
        </div> #}
        <div data-simplebar class="max-h-[350px]">
            <div class="flex flex-col gap-1" id="notification-list">
                {% set notifications = app.session.get('notification_message') %}
                {% if notifications is iterable %}
                    {% for notification in notifications %}
                        <a href="#!" class="flex gap-3 p-4 product-item hover:bg-slate-50 dark:hover:bg-zink-500">
                            {# <div class="size-10 rounded-md shrink-0 bg-slate-100">
                                <img src="{{ asset('assets/images/users/avatar-3.png') }}" alt="" class="rounded-md">
                            </div> #}
                            <div class="grow">
                                <h6 class="mb-1 font-medium"><b>{{ notification.sender_fullname }}</b> {{ notification.action }}</h6>
                                <p class="mb-0 text-sm text-slate-500 dark:text-zink-300">
                                    <i data-lucide="clock" class="inline-block size-3.5 mr-1"></i>
                                    <span class="align-middle">{{ notification.datetime|date('l h:i A') }}</span>
                                </p>
                            </div>
                            <div class="flex items-center self-start gap-2 text-xs text-slate-500 shrink-0 dark:text-zink-300">
                                <div class="size-1.5 bg-custom-500 rounded-full"></div> 
                                {% set now = date() %}
                                {% set notificationDate = date(notification.datetime) %}
                                {% set diff = now.diff(notificationDate) %}
                                {% if diff.y > 0 %}
                                    {{ diff.y }} year{{ diff.y > 1 ? 's' : '' }}
                                {% elseif diff.m > 0 %}
                                    {{ diff.m }} month{{ diff.m > 1 ? 's' : '' }}
                                {% elseif diff.d > 0 %}
                                    {{ diff.d }} day{{ diff.d > 1 ? 's' : '' }}
                                {% elseif diff.h > 0 %}
                                    {{ diff.h }} hour{{ diff.h > 1 ? 's' : '' }}
                                {% elseif diff.i > 0 %}
                                    {{ diff.i }} minute{{ diff.i > 1 ? 's' : '' }}
                                {% else %}
                                    {{ diff.s }} second{{ diff.s > 1 ? 's' : '' }}
                                {% endif %}
                            </div>
                        </a>
                    {% endfor %}
                {% else %}
                    <p>No notifications available.</p>
                {% endif %}
            </div>
        </div>
    </div>
</div>